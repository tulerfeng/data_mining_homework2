# 互评作业二: 频繁模式与关联规则挖掘

____

## 数据集选取

- [Wine Reviews](https://www.kaggle.com/zynicide/wine-reviews)

## 代码地址



## 频繁模型挖掘

首先，读取数据

删除含有空值的数据，便于后续进行处理

对于连续数据，进行离散化处理，并观察其分布：

以price数据为例

##### price

![](1.png)



找出其频繁项集，部分频繁项集如下：

| rank |                                频繁项集 | 支持度 |
| ---: | --------------------------------------: | ------ |
|    0 |                              price_0_50 | 0.8454 |
|    1 |                              California | 0.7036 |
|    2 |                 California & price_0_50 | 0.5778 |
|    3 |                           Central Coast | 0.2159 |
|    4 |              Central Coast & California | 0.2159 |
|    5 |              Central Coast & price_0_50 | 0.1907 |
|    6 | Central Coast & price_0_50 & California | 0.1907 |
|    7 |                                  Sonoma | 0.1822 |
|    8 |                     California & Sonoma | 0.1822 |
|    9 |                              Pinot Noir | 0.1728 |
|   10 |                              Washington | 0.1646 |

## 关联规则挖掘

| 排名 |                                            关联规则 | 支持度 | 置信度 |
| ---: | --------------------------------------------------: | -----: | ------ |
|    0 |            Mendocino/Lake Counties  and  California | 0.0215 | 1.0000 |
|    1 |          Napa & Cabernet Sauvignon  and  California | 0.0650 | 1.0000 |
|    2 |                 Central Coast & 87  and  California | 0.0263 | 1.0000 |
|    3 |                        Sonoma & 87  and  California | 0.0243 | 1.0000 |
|    4 |         Central Coast & Chardonnay  and  California | 0.0358 | 1.0000 |
|    5 |                Chardonnay & Sonoma  and  California | 0.0337 | 1.0000 |
|    6 |       Central Coast & price_50_100  and  California | 0.0245 | 1.0000 |
|    7 |              price_50_100 & Sonoma  and  California | 0.0312 | 1.0000 |
|    8 |                Napa & price_50_100  and  California | 0.0447 | 1.0000 |
|    9 |                         Finger Lakes  and  New York | 0.0295 | 1.0000 |
|   10 |               Columbia Valley & 88  and  Washington | 0.0250 | 1.0000 |
|   11 |                  Napa & price_0_50  and  California | 0.0820 | 1.0000 |
|   12 | Columbia Valley & Cabernet Sauvignon  and  Washi... | 0.0241 | 1.0000 |
|   13 |        Cabernet Sauvignon & Sonoma  and  California | 0.0204 | 1.0000 |
|   14 |       Columbia Valley & price_0_50  and  Washington | 0.1398 | 1.0000 |
|   15 |         Central Coast & Pinot Noir  and  California | 0.0512 | 1.0000 |
|   16 |                Pinot Noir & Sonoma  and  California | 0.0509 | 1.0000 |
|   17 |                price_0_50 & Sonoma  and  California | 0.1497 | 1.0000 |
|   18 |                 Central Coast & 88  and  California | 0.0220 | 1.0000 |
|   19 |                 Central Coast & 90  and  California | 0.0211 | 1.0000 |
|   20 |    Zinfandel & price_0_50 & Sonoma  and  California | 0.0230 | 1.0000 |
|   21 |                      Willamette Valley  and  Oregon | 0.0593 | 1.0000 |
|   22 |                               Napa  and  California | 0.1404 | 1.0000 |
|   23 |                    Columbia Valley  and  Washington | 0.1545 | 1.0000 |
|   24 |                             Sonoma  and  California | 0.1822 | 1.0000 |
|   25 |                      Central Coast  and  California | 0.2159 | 1.0000 |
|   26 |           price_0_50 & Napa-Sonoma  and  California | 0.0210 | 1.0000 |
|   27 |      price_0_50 & Sierra Foothills  and  California | 0.0276 | 1.0000 |
|   28 |            price_0_50 & Finger Lakes  and  New York | 0.0292 | 1.0000 |
|   29 |      price_0_50 & California Other  and  California | 0.0544 | 1.0000 |
|   30 |               Columbia Valley & 90  and  Washington | 0.0208 | 1.0000 |
|   31 |                 Zinfandel & Sonoma  and  California | 0.0242 | 1.0000 |
|   32 |         Pinot Noir & Willamette Valley  and  Oregon | 0.0398 | 1.0000 |
|   33 |         price_0_50 & Willamette Valley  and  Oregon | 0.0482 | 1.0000 |
|   34 |                   California Other  and  California | 0.0556 | 1.0000 |
|   35 |            Columbia Valley & Syrah  and  Washington | 0.0217 | 1.0000 |
|   36 |   Pinot Noir & price_0_50 & Sonoma  and  California | 0.0328 | 1.0000 |
|   37 |                 Central Coast & 92  and  California | 0.0201 | 1.0000 |
|   38 |         Central Coast & price_0_50  and  California | 0.1907 | 1.0000 |
|   39 |                        90 & Sonoma  and  California | 0.0232 | 1.0000 |
|   40 | Central Coast & price_0_50 & Chardonnay  and  Ca... | 0.0345 | 1.0000 |
|   41 |                        Napa-Sonoma  and  California | 0.0253 | 1.0000 |
|   42 |    Central Coast & price_0_50 & 88  and  California | 0.0202 | 1.0000 |
|   43 |                   Sierra Foothills  and  California | 0.0281 | 1.0000 |
|   44 |    Central Coast & price_0_50 & 87  and  California | 0.0250 | 1.0000 |
|   45 |   Pinot Noir & price_0_50 & Willamette Valley ==... | 0.0296 | 1.0000 |
|   46 | Central Coast & price_0_50 & Pinot Noir  and  Ca... | 0.0378 | 1.0000 |
|   47 |  Columbia Valley & price_0_50 & 88  and  Washington | 0.0244 | 1.0000 |
|   48 | Napa & price_50_100 & Cabernet Sauvignon  and  C... | 0.0311 | 1.0000 |
|   49 |   Chardonnay & price_0_50 & Sonoma  and  California | 0.0297 | 1.0000 |
|   50 | Napa & price_0_50 & Cabernet Sauvignon  and  Cal... | 0.0237 | 1.0000 |
|   51 |           price_0_50 & Sonoma & 87  and  California | 0.0225 | 1.0000 |
|   52 |                    Sauvignon Blanc  and  price_0_50 | 0.0402 | 0.9975 |
|   53 |       California & Sauvignon Blanc  and  price_0_50 | 0.0342 | 0.9971 |
|   54 |                       Finger Lakes  and  price_0_50 | 0.0292 | 0.9914 |
|   55 |            Finger Lakes  and  New York & price_0_50 | 0.0292 | 0.9914 |
|   56 |            New York & Finger Lakes  and  price_0_50 | 0.0292 | 0.9914 |
|   57 |                           Riesling  and  price_0_50 | 0.0282 | 0.9911 |
|   58 |                           New York  and  price_0_50 | 0.0452 | 0.9853 |
|   59 |      Sierra Foothills  and  California & price_0_50 | 0.0276 | 0.9824 |
|   60 |      California & Sierra Foothills  and  price_0_50 | 0.0276 | 0.9824 |


## 关联评价

|      |                                            关联规则 | 支持度 | 置信度 |    lift | leverage |
| ---: | --------------------------------------------------: | -----: | -----: | ------: | -------- |
|    0 |            Finger Lakes  and  New York & price_0_50 | 0.0292 | 0.9914 | 21.9390 | 0.0279   |
|    1 |            New York & price_0_50  and  Finger Lakes | 0.0292 | 0.6465 | 21.9390 | 0.0279   |
|    2 |                         New York  and  Finger Lakes | 0.0295 | 0.6425 | 21.8024 | 0.0281   |
|    3 |            price_0_50 & Finger Lakes  and  New York | 0.0292 | 1.0000 | 21.8024 | 0.0279   |
|    4 |                         Finger Lakes  and  New York | 0.0295 | 1.0000 | 21.8024 | 0.0281   |
|    5 |            New York  and  price_0_50 & Finger Lakes | 0.0292 | 0.6370 | 21.8024 | 0.0279   |
|    6 |         Pinot Noir & Oregon  and  Willamette Valley | 0.0398 | 0.8851 | 14.9261 | 0.0372   |
|    7 |         Willamette Valley  and  Pinot Noir & Oregon | 0.0398 | 0.6718 | 14.9261 | 0.0372   |
|    8 | Willamette Valley  and  Pinot Noir & Oregon & pr... | 0.0296 | 0.5000 | 14.5626 | 0.0276   |
|    9 | Pinot Noir & Oregon & price_0_50  and  Willamett... | 0.0296 | 0.8636 | 14.5626 | 0.0276   |
|   10 | Pinot Noir & Oregon  and  price_0_50 & Willamett... | 0.0296 | 0.6587 | 13.6768 | 0.0275   |